sudo nano /etc/systemd/system/lustre-exporter.service

[Unit]
Description=Lustre Home Disk Exporter
After=network.target

[Service]
Type=oneshot
ExecStart=/home/mspasic/lustre_exporte/lustre_exporter.sh

sudo nano /etc/systemd/system/lustre-exporter.timer

[Unit]
Description=Run Lustre Home Exporter every 3 hour

[Timer]
OnBootSec=5m
OnUnitActiveSec=3h
Unit=lustre-exporter.service

[Install]
WantedBy=timers.target

sudo systemctl daemon-reload
sudo systemctl enable --now lustre-exporter.timer
sudo systemctl enable lustre-exporter.service
sudo systemctl start lustre-exporter.service
sudo systemctl list-timers --all | grep lustre
sudo systemctl status lustre-exporter.service
sudo journalctl -u lustre-exporter.service -f

sudo nano /etc/systemd/system/docker-compose-app.service


[Unit]
Description=Docker Compose App
Requires=docker.service
After=docker.service network-online.target
Wants=network-online.target

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/home/mspasic/lustre_exporter
ExecStart=/usr/bin/docker compose up -d
ExecStop=/usr/bin/docker compose down
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target

sudo systemctl daemon-reload
sudo systemctl enable docker-compose-app.service
sudo systemctl start docker-compose-app.service